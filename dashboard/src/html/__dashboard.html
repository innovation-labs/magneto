{% extends '__base.html' %}
{% load i18n to_json %}

{% block meta %}
  <meta charset="utf-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
{% endblock %}

{% block title %}
  <title>IntentAware | Dashboard</title>
{% endblock %}


{% block styles_inline %}
{% endblock %}

{% block styles_extra %}
<link href='https://api.mapbox.com/mapbox.js/v2.2.4/mapbox.css' rel='stylesheet' />
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />
{% endblock %}

{% block content %}
  <div ng-app="adomattic" layout="column" flex layout-fill ng-init="globals = {{ globals | jsonify }};">

    {% if debug %}
      {% include 'includes/header.html' %}
    {% else %}
      {% include 'includes/header.html' %}
    {% endif %}

    <div class="main" layout="row">
      {% if debug %}
        {% include 'includes/sidebar.html' %}
      {% else %}
        {% include 'includes/sidebar.html' %}
      {% endif %}
      <div layout="column" layout-fill>
        <div class="md-padding" ng-view></div>
      </div>
    </div>

  </div>
{% endblock %}

{% block scripts_src %}
  <!-- build:js scripts/vendor.dashboard.min.js -->
  <!-- bower:js -->
  <!-- endinject -->
  <!-- endbuild -->

  <!-- build:js scripts/app.dashboard.min.js -->
  <!-- inject:js -->
  <!-- endinject -->

  <!-- partials:js -->
  <!-- angular templates will be automatically converted in js and inserted here -->
  <!-- endinject -->
  <!-- endbuild -->

  <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
  {% comment %}
  var html = 'src="dash/bower_components/angular/angular.js" src="dash/bower_components/angular/angular-material.js"';
  var r = /(src=)("[^"]*"|^[^"]*$)/g;
  var f = html.replace(r, '$1{% static $2 %}');
  console.log(f);
  {% endcomment %}
{% endblock %}

{% block scripts_inline %}
  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
  <script>
    (function (b, o, i, l, e, r) {
      b.GoogleAnalyticsObject = l;
      b[l] || (b[l] =
        function () {
          (b[l].q = b[l].q || []).push(arguments)
        });
      b[l].l = +new Date;
      e = o.createElement(i);
      r = o.getElementsByTagName(i)[0];
      e.src = '//www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e, r)
    }(window, document, 'script', 'ga'));
    ga('create', 'UA-XXXXX-X');
    ga('send', 'pageview');
  </script>

  <!-- Pace Options -->
  <script>
  window.paceOptions = {
    ajax: {
        trackMethods: ['GET', 'POST', 'PUT', 'DELETE', 'REMOVE']
      }
    };
  </script>

  <!-- ZeroClipboard Option -->
  <script>
    ZeroClipboard.config({
      swfPath: '{{ STATIC_URL }}dashboard/swf/ZeroClipboard.swf'
    });
  </script>

  <!-- Mapbox Config -->
  <script type="text/javascript">
  // Provide your access token
  L.mapbox.accessToken = 'pk.eyJ1IjoiaW50ZW50YXdhcmUiLCJhIjoiY2lqdXA0ZGFmMGZkbHVva2dqYXEzMmcycyJ9.EksiZNadDOPtItgok9cVpg';
  // Create a map in the div #map
  </script>
{% endblock %}

{% block extras %}
{% endblock %}
